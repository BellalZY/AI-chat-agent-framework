{"ast":null,"code":"fetch('http://localhost:8000/api/ask/', {\n  method: 'GET',\n  credentials: 'include'\n});\nexport const getAIMessage = async userQuery => {\n  function getCSRFToken() {\n    const name = 'csrftoken';\n    const cookies = document.cookie.split(';');\n    for (let cookie of cookies) {\n      let [key, value] = cookie.trim().split('=');\n      if (key === name) return value;\n    }\n    return '';\n  }\n  const message = {\n    role: \"assistant\",\n    content: \"Connect your backend here....\"\n  };\n  fetch(\"http://localhost:8000/api/ask/\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      'X-CSRFToken': getCSRFToken()\n    },\n    body: JSON.stringify({\n      \"question\": \"The ice maker on my Whirlpool fridge is not working. How can I fix it?\"\n    }),\n    credentials: 'include'\n  }).then(response => {\n    console.log(response);\n    response.json();\n  }).then(data => {\n    console.log(data);\n    console.log(\"Answer:\", data.answer);\n    message.content = data.answer;\n  }).catch(error => {\n    console.error(\"Error:\", error);\n  });\n  return message;\n};","map":{"version":3,"names":["fetch","method","credentials","getAIMessage","userQuery","getCSRFToken","name","cookies","document","cookie","split","key","value","trim","message","role","content","headers","body","JSON","stringify","then","response","console","log","json","data","answer","catch","error"],"sources":["/Users/bellal/case-study/Frontend-React/src/api/api.js"],"sourcesContent":["\nfetch('http://localhost:8000/api/ask/', {\n  method: 'GET',\n  credentials: 'include',\n});\n\n\nexport const getAIMessage = async (userQuery) => {\n\n  function getCSRFToken() {\n    const name = 'csrftoken';\n    const cookies = document.cookie.split(';');\n    for (let cookie of cookies) {\n      let [key, value] = cookie.trim().split('=');\n      if (key === name) return value;\n    }\n    return '';\n  }\n\n  const message = \n    {\n      role: \"assistant\",\n      content: \"Connect your backend here....\"\n    }\n\n  fetch(\"http://localhost:8000/api/ask/\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      'X-CSRFToken': getCSRFToken(),\n    },\n    body: JSON.stringify({ \"question\": \"The ice maker on my Whirlpool fridge is not working. How can I fix it?\" }),\n    credentials: 'include',\n  })\n    .then(response => {\n      console.log(response)\n      response.json()\n    })\n    .then(data => {\n      console.log(data)\n      console.log(\"Answer:\", data.answer);\n      message.content = data.answer\n    })\n    .catch(error => {\n      console.error(\"Error:\", error);\n    });\n\n  return message;\n};\n"],"mappings":"AACAA,KAAK,CAAC,gCAAgC,EAAE;EACtCC,MAAM,EAAE,KAAK;EACbC,WAAW,EAAE;AACf,CAAC,CAAC;AAGF,OAAO,MAAMC,YAAY,GAAG,MAAOC,SAAS,IAAK;EAE/C,SAASC,YAAYA,CAAA,EAAG;IACtB,MAAMC,IAAI,GAAG,WAAW;IACxB,MAAMC,OAAO,GAAGC,QAAQ,CAACC,MAAM,CAACC,KAAK,CAAC,GAAG,CAAC;IAC1C,KAAK,IAAID,MAAM,IAAIF,OAAO,EAAE;MAC1B,IAAI,CAACI,GAAG,EAAEC,KAAK,CAAC,GAAGH,MAAM,CAACI,IAAI,CAAC,CAAC,CAACH,KAAK,CAAC,GAAG,CAAC;MAC3C,IAAIC,GAAG,KAAKL,IAAI,EAAE,OAAOM,KAAK;IAChC;IACA,OAAO,EAAE;EACX;EAEA,MAAME,OAAO,GACX;IACEC,IAAI,EAAE,WAAW;IACjBC,OAAO,EAAE;EACX,CAAC;EAEHhB,KAAK,CAAC,gCAAgC,EAAE;IACtCC,MAAM,EAAE,MAAM;IACdgB,OAAO,EAAE;MACP,cAAc,EAAE,kBAAkB;MAClC,aAAa,EAAEZ,YAAY,CAAC;IAC9B,CAAC;IACDa,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAE,UAAU,EAAE;IAAyE,CAAC,CAAC;IAC9GlB,WAAW,EAAE;EACf,CAAC,CAAC,CACCmB,IAAI,CAACC,QAAQ,IAAI;IAChBC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC;IACrBA,QAAQ,CAACG,IAAI,CAAC,CAAC;EACjB,CAAC,CAAC,CACDJ,IAAI,CAACK,IAAI,IAAI;IACZH,OAAO,CAACC,GAAG,CAACE,IAAI,CAAC;IACjBH,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEE,IAAI,CAACC,MAAM,CAAC;IACnCb,OAAO,CAACE,OAAO,GAAGU,IAAI,CAACC,MAAM;EAC/B,CAAC,CAAC,CACDC,KAAK,CAACC,KAAK,IAAI;IACdN,OAAO,CAACM,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAAC;EAChC,CAAC,CAAC;EAEJ,OAAOf,OAAO;AAChB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}